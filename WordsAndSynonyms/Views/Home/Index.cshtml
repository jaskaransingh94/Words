@{
	ViewBag.Title = "Search";
}
<link href='https://fonts.googleapis.com/css?family=Mansalva' rel='stylesheet' type='text/css'>
<script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/2.2.0/anime.js"></script>
<link href="~/Dependencies/css/Index.css" rel="stylesheet" />
<nav>
	<div class="nav-wrapper">
		<a href="#" class="brand-logo">Logo</a>
		<ul id="nav-mobile" class="right">
			<li class="flex"><i class="material-icons prefix">featured_play_list</i><a href="sass.html">PlayList</a></li>
			<li class="flex"><i class="material-icons prefix">perm_data_setting</i><a href="@Url.Action("Index", "Backend")">Backend</a></li>
		</ul>
	</div>
</nav>
<div class="container page">
	<div class="row logo">
		<div class="ml2">WORDS</div>
	</div>
	<div class="row search">
		<div class="input-field s12 m12 l12" style="width:100%">
			<i class="material-icons prefix">search</i>
			<input type="text" id="autocomplete-input" class="autocomplete">
			<label for="autocomplete-input">Search...</label>
		</div>
	</div>
</div>

<script>

	$(document).ready(function () {

		$(".autocomplete").each(function () {
			let self = this;
			$(this).autocomplete();
			var instance = M.Autocomplete.getInstance(this);
			instance.options.minLength = 2
			$(this).on("input change", function () {
				var textValue = $('#autocomplete-input')[0].value;
				//var url = `https://wordsapiv1.p.mashape.com/words/${textValue}`
				let url = '@Url.Action("loadSuggestions", "Home")';
				if (textValue.trim().length >= 2) {
					$.ajax({
						url: url,
						type: 'get',
						cache: false,
						data: { word:textValue },
						//headers: { "X-Mashape-Key": "ea39a00b6amsh04d5bbc72fb3da0p1b57e5jsn5f53f63651a9", "Accept": "application/json" },
						success: function (data) {
							if (Object.keys(data).length !== 0 && data.constructor === Object) {
								$(self).autocomplete("updateData", JSON.parse(data.data));
							}
						},
						error: function (err) {
							console.log(err);
						}
					});
				}
			});
		});

		//var el = document.querySelector('.my-text');

		//var options = {
		//	size: 100,         // Font size, defined by the height of the letters (pixels)
		//	weight: 10,         // Font weight (pixels)
		//	rounded: false,    // Rounded letter endings
		//	color: '#5F6062',  // Font color
		//	duration: 1,       // Duration of the animation of each letter (seconds)
		//	delay: [0, 0.05],  // Delay animation among letters (seconds)
		//	fade: 0.5,         // Fade effect duration (seconds)
		//	easing: d3_ease.easeCubicInOut.ease,   // Easing function
		//	individualDelays: false,
		//};

		//var myText = new Letters(el, options);
		//var newOptions = {
		//	duration: 2,
		//	delay: 0.2,
		//	fade: 1,
		//	easing: d3_ease.easeCircleInOut.ease,
		//	individualDelays: false,
		//	callback: function () {
		//		//myText.hide();
		//	}
		//};

		//myText.show(newOptions);
	});

	$(window).on('load', function () {
		var textWrapper = document.querySelector('.ml2');
		textWrapper.innerHTML = textWrapper.textContent.replace(/\S/g, "<span class='letter'>$&</span>");

		anime.timeline({
			loop: false,
		})
		  .add({
		  	targets: '.ml2 .letter',
		  	scale: [4, 1],
		  	opacity: [0, 1],
		  	translateZ: 0,
		  	easing: "easeOutExpo",
		  	duration: 950,
		  	delay: (el, i) => 70 * i,
		  }).add({
		  	targets: '.ml2',
		  	opacity: 1,
		  	duration: 1000,
		  	easing: "easeOutExpo",
		  	delay: 1000
		  });

	})

</script>
